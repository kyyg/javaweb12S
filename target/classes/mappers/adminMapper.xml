<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.javaweb12S.dao.AdminDAO">


	<select id="getAllOnedayClassList"  resultType="com.spring.javaweb12S.vo.DbOnedayClassVO">
		select * from dbOnedayClass order by idx desc;
	</select>

	<select id="getChart1" resultType="com.spring.javaweb12S.vo.ChartVO">
		select productName, sum(totalPrice) as proTotalSum
		from dborder
		where orderdate >= date_sub(now(), interval 6 month)
		group by productName
		order by proTotalSum desc limit 4;
	</select>

	<select id="getChart2" resultType="com.spring.javaweb12S.vo.ChartVO">
		select month(orderDate) as salesMonth, sum(orderTotalPrice) as salesMonthPrice
		from dbbaesong bs
		where orderDate >= DATE_SUB(now(), interval 3 month)
		group by month(orderDate)
		order by month(orderDate);
	</select>

	<select id="getChart3" resultType="com.spring.javaweb12S.vo.ChartVO">
		select month(cl.cancelDate) as cancelMonth, sum(od.totalPrice) as cancelMonthPrice
		from dbOrder od
		join dbordercancel cl on od.idx = cl.cancelIdx
		where cl.cancelDate >= date_sub(now(), interval 3 month)
		group by month(cl.cancelDate)
		order by month(cl.cancelDate);
	</select>

	<select id="getOrder4" resultType="com.spring.javaweb12S.vo.DbBaesongVO">
		select * from dbbaesong order by idx desc limit 3;
	</select>
	
	<select id="getCancelOrder4" resultType="com.spring.javaweb12S.vo.DbOrderCancelVO">
		select * from dbOrderCancel order by idx desc limit 3;
	</select>
	
	<select id="getBoard4" resultType="com.spring.javaweb12S.vo.BoardVO">
		select * from board order by idx desc limit 3;
	</select>
	
	<select id="getclass4" resultType="com.spring.javaweb12S.vo.DbOnedayClassVO">
		select * from dbOnedayClass order by idx desc limit 3;
	</select>

	<select id="getWeekOrder" resultType="int">
		select count(*) from dbOrder where orderDate between date_sub(now(), interval 7 day) and now();
	</select>
	
	<select id="getWeekCancel" resultType="int">
		select count(*) from dbOrderCancel where cancelDate between date_sub(now(), interval 7 day) and now();
	</select>
	
	<select id="getWeekBoard" resultType="int">
		select count(*) from board where WDate between date_sub(now(), interval 7 day) and now();
	</select>
	
	<select id="getWeekClass" resultType="int">
		select count(*) from dbOnedayClass where WDate between date_sub(now(), interval 7 day) and now();
	</select>





  
  <delete id="setReviewDelete">
  	delete from dbReview where idx = #{idx};
  </delete>
  
  <delete id="setBoardDelete">
  	delete from board where idx = #{idx};
  </delete>
  
  <delete id="setNoticeDelete">
  	delete from notice where idx = #{idx};
  </delete>
  
  <delete id="setOnedayClassDelete">
  	delete from dbOnedayClass where idx = #{idx};
  </delete>
  
  
  
  
  
</mapper>